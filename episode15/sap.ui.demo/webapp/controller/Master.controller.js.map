{"version":3,"file":"Master.controller.js","names":["BaseController","_interopRequireDefault","__BaseController","system","sap_ui_Device","Tile","__Tile","Master","extend","constructor","prototype","apply","arguments","descendingSort","onMasterMatched","_onMasterMatched","getModel","setProperty","onListItemPress","_onListItemPress","event","replace","phone","id","getSource","getBindingContext","getProperty","helper","getOwnerComponent","getHelper","nextUIState","getNextUIState","getRouter","navTo","layout","onSearch","_onSearch","query","getParameter","tableSearchState","length","Filter","FilterOperator","Contains","getView","byId","getBinding","filter","onSort","_onSort","view","table","binding","sorter","Sorter","sort","createTiles","_createTiles","sId","oContext","text","image","press","filterCategories","bind","_filterCategories","getText","onOpenFeedbackDialog","_onOpenFeedbackDialog","feedbackDialog","Fragment","load","name","controller","open","onCloseFeedbackDialog","_onCloseFeedbackDialog","close"],"sources":["../../src/controller/Master.controller.ts"],"sourcesContent":["import BaseController from \"./BaseController\";\nimport { system } from \"sap/ui/Device\";\nimport UI5Event from \"sap/ui/base/Event\";\nimport Component, { UIState } from \"../Component\";\nimport List from \"sap/m/List\";\nimport JSONModel from \"sap/ui/model/json/JSONModel\";\nimport ODataListBinding from \"sap/ui/model/odata/v2/ODataListBinding\";\nimport CustomListItem from \"sap/m/CustomListItem\";\nimport Filter from \"sap/ui/model/Filter\";\nimport FilterOperator from \"sap/ui/model/FilterOperator\";\nimport Sorter from \"sap/ui/model/Sorter\";\nimport Tile from \"../control/Tile\";\nimport Context from \"sap/ui/model/Context\";\nimport Fragment from \"sap/ui/core/Fragment\";\nimport Dialog from \"sap/m/Dialog\";\n\n/**\n * @namespace sap.ui.demo.controller\n */\nexport default class Master extends BaseController {\n\tprivate descendingSort = false;\n\n\tprivate onMasterMatched() {\n\t\t(this.getModel(\"appView\") as JSONModel).setProperty(\"/layout\", \"OneColumn\");\n\t}\n\n\tprivate async onListItemPress(event: UI5Event): Promise<void> {\n\t\tconst replace = !system.phone,\n\t\t\tid = ((event.getSource() as CustomListItem).getBindingContext().getProperty(\"ProductID\") as number),\n\t\t\thelper = await (this.getOwnerComponent() as Component).getHelper(),\n\t\t\tnextUIState = (helper.getNextUIState(1) as UIState);\n\t\tthis.getRouter().navTo(\"detail\", { id: id, layout: nextUIState.layout },{},replace);\n\t}\n\n\tprivate onSearch(event: UI5Event) {\n\t\tconst query = event.getParameter(\"query\") as string;\n\t\tlet tableSearchState:Array<Filter> = [];\n\n\t\tif (query && query.length > 0) {\n\t\t\ttableSearchState = [new Filter(\"ProductName\", FilterOperator.Contains, query)];\n\t\t}\n\n\t\t((this.getView().byId(\"productsTable\") as List).getBinding(\"items\") as ODataListBinding).filter(tableSearchState, \"Application\");\n\t}\n\n\tprivate onSort() {\n\t\tthis.descendingSort = !this.descendingSort;\n\t\tconst view = this.getView(),\n\t\t\ttable = (view.byId(\"productsTable\") as List),\n\t\t\tbinding = (table.getBinding(\"items\") as ODataListBinding),\n\t\t\tsorter = new Sorter(\"Category/CategoryName\", this.descendingSort, true);\n\n\t\tbinding.sort(sorter);\n\t}\n\n\tprivate createTiles(sId: string, oContext: Context) {\n\t\treturn new Tile(sId, {\n\t\t\ttext: (oContext.getProperty(\"CategoryName\") as string),\n\t\t\timage: (oContext.getProperty(\"Picture\") as string),\n\t\t\tpress: this.filterCategories.bind(this),\n\t\t})\n\t}\n\n\tprivate filterCategories(event: UI5Event) {\n\t\tconst query = (event.getSource() as Tile).getText();\n\t\tlet tableSearchState:Array<Filter> = [];\n\n\t\tif (query && query.length > 0) {\n\t\t\ttableSearchState = [new Filter(\"Category/CategoryName\", FilterOperator.Contains, query)];\n\t\t}\n\n\t\t((this.getView().byId(\"productsTable\") as List)\n\t\t\t.getBinding(\"items\") as ODataListBinding)\n\t\t\t.filter(tableSearchState, \"Application\");\n\t}\n\n\tfeedbackDialog: Dialog\n\tprivate async onOpenFeedbackDialog(event: UI5Event) {\n\t\tif (!this.feedbackDialog) {\n\t\t\tthis.feedbackDialog = (await Fragment.load({\n\t\t\t\tname: \"sap.ui.demo.fragment.FeedbackDialog\",\n\t\t\t\tcontroller: this\n\t\t\t}) as Dialog)\n\t\t}\n\t\tthis.feedbackDialog.open()\n\t}\n\n\tprivate onCloseFeedbackDialog(event: UI5Event) {\n\t\tthis.feedbackDialog.close()\n\t}\n}"],"mappings":"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"}