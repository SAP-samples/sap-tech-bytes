{"version":3,"file":"Component.js","names":["models","_interopRequireDefault","__models","support","sap_ui_Device","LayoutType","sap_f_library","ErrorHandler","__ErrorHandler","Component","UIComponent","extend","metadata","manifest","init","_init","errorHandler","UIComponent.prototype.init.call","setModel","createDeviceModel","JSONModel","getRouter","attachBeforeRouteMatched","event","onBeforeRouteMatched","initialize","destroy","_destroy","detachBeforeRouteMatched","UIComponent.prototype.destroy.call","getContentDensityClass","_getContentDensityClass","contentDensityClass","undefined","document","body","classList","contains","touch","_onBeforeRouteMatched","oEvent","model","getModel","layout","getParameters","arguments","helper","getHelper","nextUIState","getNextUIState","setProperty","_getHelper","fcl","getFcl","settings","defaultTwoColumnLayoutType","TwoColumnsMidExpanded","defaultThreeColumnLayoutType","ThreeColumnsMidExpanded","FlexibleColumnLayoutSemanticHelper","getInstanceFor","_getFcl","Promise","resolve","reject","FCL","getRootControl","byId","attachAfterInit","getSource"],"sources":["../src/Component.ts"],"sourcesContent":["import UIComponent from \"sap/ui/core/UIComponent\";\nimport models from \"./model/models\";\nimport { support } from \"sap/ui/Device\";\nimport FlexibleColumnLayoutSemanticHelper from \"sap/f/FlexibleColumnLayoutSemanticHelper\";\nimport { LayoutType } from \"sap/f/library\";\nimport FlexibleColumnLayout from \"sap/f/FlexibleColumnLayout\";\nimport JSONModel from \"sap/ui/model/json/JSONModel\";\nimport UI5Event from \"sap/ui/base/Event\";\nimport View from \"sap/ui/core/mvc/View\";\nimport ErrorHandler from \"./controller/ErrorHandler\";\n\ntype routeParameters = {\n\targuments: {\n\t\tlayout: string;\n\t}\n};\ntype startupParameters = {\n\tappType:string[]\n}\ntype componentData = {\n\tstartupParameters: startupParameters\n};\ntype routeInfo = {\n\tname:string;\n};\nexport type UIState = {\n\t\"layout\": string;\n\t\"maxColumnsCount\": number;\n\t\"columnsSizes\": {\n\t\t\"beginColumn\": number;\n\t\t\"midColumn\": number;\n\t\t\"endColumn\": number;\n\t},\n\t\"columnsVisibility\": {\n\t\t\"beginColumn\": boolean;\n\t\t\"midColumn\": boolean;\n\t\t\"endColumn\": boolean;\n\t},\n\t\"isFullScreen\": boolean;\n\t\"isLogicallyFullScreen\": boolean;\n\t\"actionButtonsInfo\": {\n\t\t\"midColumn\": {\n\t\t\t\"fullScreen\": string;\n\t\t\t\"exitFullScreen\": string;\n\t\t\t\"closeColumn\": string;\n\t\t},\n\t\t\"endColumn\": {\n\t\t\t\"fullScreen\": string;\n\t\t\t\"exitFullScreen\": string;\n\t\t\t\"closeColumn\": string;\n\t\t}\n\t}\n}\n\n/**\n * @namespace sap.ui.demo\n */\nexport default class Component extends UIComponent {\n\tprivate contentDensityClass: string | undefined;\n\tprivate errorHandler: ErrorHandler;\n\n\tpublic static metadata = {\n\t\tmanifest: \"json\"\n\t};\n\n\tpublic init(): void {\n\t\tthis.errorHandler = new ErrorHandler(this);\n\t\tsuper.init();\n\t\tthis.setModel(models.createDeviceModel(), \"device\");\n\t\tthis.setModel(new JSONModel(), \"appView\");\n\t\tthis.getRouter().attachBeforeRouteMatched((event: UI5Event) => this.onBeforeRouteMatched(event), this)\n\t\tthis.getRouter().initialize();\n\t}\n\n\tpublic destroy(): void {\n\t\tthis.getRouter().detachBeforeRouteMatched((event: UI5Event) => this.onBeforeRouteMatched(event), this);\n\t\tsuper.destroy();\n\t}\n\n\tpublic getContentDensityClass(): string {\n\t\tif (this.contentDensityClass === undefined) {\n\t\t\t// check whether FLP has already set the content density class; do nothing in this case\n\t\t\t// eslint-disable-next-line\n\t\t\tif (document.body.classList.contains(\"sapUiSizeCozy\") || document.body.classList.contains(\"sapUiSizeCompact\")) {\n\t\t\t\tthis.contentDensityClass = \"\";\n\t\t\t} else if (!support.touch) { // apply \"compact\" mode if touch is not supported\n\t\t\t\tthis.contentDensityClass = \"sapUiSizeCompact\";\n\t\t\t} else {\n\t\t\t\t// \"cozy\" in case of touch support; default for most sap.m controls, but needed for desktop-first controls like sap.ui.table.Table\n\t\t\t\tthis.contentDensityClass = \"sapUiSizeCozy\";\n\t\t\t}\n\t\t}\n\t\treturn this.contentDensityClass;\n\t}\n\n\tprivate async onBeforeRouteMatched(oEvent: UI5Event) {\n\t\tconst model = (this.getModel(\"appView\") as JSONModel),\n\t\t\tlayout = (oEvent.getParameters() as routeParameters).arguments.layout;\n\n\t\t// If there is no layout parameter, query for the default level 0 layout (normally OneColumn)\n\t\tif (!layout) {\n\t\t\tconst helper = await this.getHelper() ;\n\t\t\tconst nextUIState = (helper.getNextUIState(0) as UIState);\n\t\t\tmodel.setProperty(\"/layout\", nextUIState.layout);\n\t\t\treturn;\n\t\t}\n\n\t\tmodel.setProperty(\"/layout\", layout);\n\t}\n\n\tpublic async getHelper(): Promise<FlexibleColumnLayoutSemanticHelper> {\n\t\tconst fcl = await this.getFcl(),\n\t\t\tsettings = {\n\t\t\t\tdefaultTwoColumnLayoutType: LayoutType.TwoColumnsMidExpanded,\n\t\t\t\tdefaultThreeColumnLayoutType: LayoutType.ThreeColumnsMidExpanded\n\t\t\t};\n\t\treturn (FlexibleColumnLayoutSemanticHelper.getInstanceFor(fcl, settings));\n\t}\n\n\tprivate getFcl(): Promise<FlexibleColumnLayout> {\n\t\treturn new Promise((resolve, reject) => {\n\t\t\tconst FCL = ((this.getRootControl() as View).byId('fcl') as FlexibleColumnLayout);\n\t\t\tif (!FCL) {\n\t\t\t\t(this.getRootControl() as View).attachAfterInit((oEvent: UI5Event) => {\n\t\t\t\t\tresolve(((oEvent.getSource() as View).byId('fcl') as FlexibleColumnLayout));\n\t\t\t\t});\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tresolve(FCL);\n\t\t});\n\t}\n}"],"mappings":"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"}